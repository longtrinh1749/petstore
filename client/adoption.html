<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="mystyle.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
	integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
	crossorigin="anonymous" />
<link rel="stylesheet" href="./adoption-stylesheet.css" media="screen,projection">

<body>
    <iframe name="hiddenFrame" class="hide"></iframe>
    <!-- begin of html -->
	<div class="m-navigator-bar" id="top-nav">
		<div class="navbar-margin-left"></div>
		<a href="index.html" style="padding: 0; display: flex; float: left; align-items: center;">
			<img src="./ImgSource/logo/logo-black.png">
            <span>ateGlory</span>
		</a>
		<div class="navbar-margin-right"></div>
		<a class="btn" href="cart.html" style="font-size: 1.125rem;">
			<span><i class="fas fa-shopping-cart"></i></span>
		</a>
		<a class="btm" href="#">About us</a>
		<a class="btn" href="#">Community</a>
		<a class="btn selected" href="#">FAQs</a>
		<a class="btn" href="#">Login</a>
		<!-- <div class="m-form-search">
            <button type="submit" class="m-form-search-button" onclick="alert('Hello world!')"></button>
            <input type="text" id="fname" name="fname" placeholder="Tim meo :>>">
        </div> -->
    </div>

    <div id="main-cover" class="adoption-wallpaper"
        style="background-image:url('./ImgSource/background/adoption_wallpaper.jpg');">
        <div class="flex-container adoption-container">
            <div class="content flex-container" style="justify-content: center;">
                <h3 style="text-align:center; flex: 0 0 100%;">want to adopt your best friend?</h3><br>
                <span style="font-size: 44px; text-align: center; flex: 0 0 100%;">
                    Unconditional love is as close as your nearest Shelter.
                </span><br>
                <span id="getapet" onclick="getAPet()">
                    GET A PET NOW
                </span>
            </div>
        </div>
    </div>

    <div class="section-container section-even" id='place'>
        <div class="search-container">
            <input type="text" id="petToSearch" placeholder="Search.." name="search">
            <button onclick="searchPet()">Search</button>
        </div>
        <div class="flex-container" id="petlist-container">
            <div class="pet-container" onclick="showDetailed(1)" id="1">
                <div class="flex-container">
                    <div class="flex-container pet-overview">
                        <img src="">
                        <div class="pet-info">
                            <div class="flex-container">
                                <div class="petname">name</div>
                                <div class="petgender">Petgender<br><span>gender</span></div>
                                <div class="petorigin">Petorigin<br><span>origin</span></div>
                                <div class="petage">Petage<br><span>age</span></div>
                                <div class="petweight">Petweight<br><span>weight</span></div>
                            </div>
                        </div>
                        <div class="pet-description">
                            <h4>Description:</h4>
                            <br>a<br>v<br>v<br><br>v<br>v<br>v<br>
                        </div>
                    </div>
                    <div class="flex-container adoption-form">
                        <div id="form1" class="form1">
                            <table>
                                <form method='post' action="http://localhost:3000/adoption">
                                    <tr>
                                        <td colspan="1" style="width: 100%; text-align: center; font-weight: bold;">
                                            ADOPTION FORM
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" style="width: 100%;">
                                            Name:
                                            <br>
                                            <input type="text" name="name" required>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" style="width: 100%;">
                                            Email:
                                            <br>
                                            <input type="text" name="email" required>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" style="width: 100%;">
                                            Phone-number:
                                            <br>
                                            <input type="text" name="phonenumber" required>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" style="width: 100%;">
                                            Pet ID:
                                            <br>
                                            <input type="text" name="petid" required>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" style="width: 100%; text-align: center;">
                                            <input type="submit" name="submit">
                                        </td>
                                    </tr>
                                </form>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="section-container">
        <div id="test"></div>
    </div>

    <div class="section-container footer">
        <div class="flex-container">
            <div class="footer-logo">
                <img src="./ImgSource/logo/logo-white.png">
            </div>
            <div class="footer-social">
                <span style="margin-right: 20px;">We Are Social: </span>
                <span>
                    <div class="flex-container">
                        <a href=# style="display: flex; padding: 0 5;">
                            <img src="ImgSource/logo/facebook.png">
                        </a>
                        <a href=# style="display: flex; padding: 0 5;">
                            <img src="ImgSource/logo/instagram.png">
                        </a>
                        <a href=# style="display: flex; padding: 0 5;">
                            <img src="ImgSource/logo/twitter.png">
                        </a>
                    </div>
                </span>

            </div>
            <div class="footer-about">
                <h3>About CateGlory</h3>
                Simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's
                standard dummy text ever since the 1500s, when an unknown printer took a galley of type and
                scrambled it to make a type specimen book.
            </div>
            <div class="footer-explore">
                <h3>Explore</h3>
                <a href=#>&#9830 About Us</a><br>
                <a href=#>&#9830 Services</a><br>
                <a href=#>&#9830 Our Team</a><br>
                <a href=#>&#9830 Adopt Pet</a><br>
                <a href=#>&#9830 Gallery</a><br>
            </div>
            <div class="footer-link">
                <h3>Useful Links</h3>
                <a href="adoption.html">&#9830 Pet Adoption</a><br>
                <a href="shopping.html">&#9830 Shopping</a><br>
                <a href="service.html">&#9830 Services</a><br>
                <a href="blog.html">&#9830 Blog</a><br>
                <a href=#>&#9830 Payment</a><br>
            </div>
            <div class="footer-workinghour">
                <h3>Working Hours</h3>
                Our support available to help you 24 hours a day. We provide our best.<br>
                <span style="color:chartreuse;">Mon - Fri :</span><span
                    style="text-decoration: underline dotted white;text-align: left;">08.00 AM - 20.00 PM</span><br>
                <span style="color:chartreuse;">Saturday :</span><span
                    style="text-decoration: underline dotted white;text-align: left;">09.00 AM - 16.00 PM</span><br>
                <span style="color:chartreuse;">Sunday :</span><span
                    style="text-decoration: underline dotted white;text-align: left;">We are closed</span><br>


            </div>
            <hr style="width: 100%; height: 3px;background-color: white;">
            <div class="footer-license">
                Copyrights 2021 <span style="color: chocolate;">CateGlory</span> All Right Reserved.
            </div>

        </div>

    </div>
</body>

<!-- -------------------nav bar effect------------------- -->
<script>
    "use strict";
    window.onscroll = function () { adjustTopNav(); adjustCoverOpacity(); };
    // ********top navigator**********
    var topNav = document.getElementById("top-nav");
    function adjustTopNav() {
        if (document.body.scrollTop > window.innerHeight / 3 || document.documentElement.scrollTop > window.innerHeight / 3) {
            topNav.className = "m-navigator-bar scrolled";
            console.log("a");
        }
        else topNav.className = topNav.className.replace(" scrolled", "");
    }

    // ********cover opacity**********
    function adjustCoverOpacity() {

        var i = (window.innerHeight - document.body.scrollTop) / window.innerHeight * 100;
        console.log(i + "%");
        if (i >= 0) {
            document.getElementById("main-cover").style.opacity = i + '%';
        }
    }

    function getAPet() {
        console.log("scroll");
        window.scrollTo({ top: window.innerHeight, behavior: 'smooth' });
    }
</script>

<!-- -------------------generate content------------------- -->
<script>
    var petContainer = document.getElementById('petlist-container');

    function clonePetItem(petToClone) {
        var tmp = "";
        return tmp +
            "<div class=\"pet-container\" onclick=\"showDetailed(\'" + petToClone['id'] + "\')\" id=\"" + petToClone['id'] + "\">" +
            "<div class=\"flex-container\">" +
            "<div class=\"flex-container pet-overview\">" +
            "<img src=\"" + petToClone['imageurl'] + "\">" +
            "<div class=\"pet-info\">" +
            "<div class=\"flex-container\">" +
            "<div class=\"petname\">" + petToClone['name'] + "</div>" +
            "<div class=\"petgender\">Pet gender<br><span>" + (petToClone['female'] == 0 ? "male" : "female") + "</span></div>" +
            "<div class=\"petorigin\">Pet origin<br><span>" + petToClone['origin'] + "</span></div>" +
            "<div class=\"petage\">Pet age<br><span>" + petToClone['age'] + "</span></div>" +
            "<div class=\"petweight\">Pet weight<br><span>" + petToClone['weight'] + "</span></div>" +
            "</div>" +
            "</div>" +
            "<div class=\"pet-description\">" +
            "<h4>Description:</h4>" +
            petToClone['description'] +
            "</div>" +
            "</div>" +
            "<div class=\"flex-container adoption-form\">" +
            "<div id=\"form1\" class=\"form1\">" +

            "<form method='post' onsubmit=\"onSubmit()\" target=\"hiddenFrame\" action=\"http://localhost:3000/pets/form\">" +
            "<table>" + "<tr>" +
            "<td colspan=\"1\" style=\"width: 100%; text-align: center; font-weight: bold;\">" +
            "ADOPTION FORM" +
            "</td>" +
            "</tr>" +
            "<tr>" +
            "<td colspan=\"1\" style=\"width: 100%;\">" +
            "Name:" +
            "<br>" +
            "<input type=\"text\" name=\"name\" required placeholder=\"your name\">" +
            "</td>" +
            "</tr>" +
            "<tr>" +
            "<td colspan=\"1\" style=\"width: 100%;\">" +
            "Email:" +
            "<br>" +
            "<input type=\"email\" name=\"email\" required placeholder=\"i.e. xyz@gmail.com\">" +
            "</td>" +
            "</tr>" +
            "<tr>" +
            "<td colspan=\"1\" style=\"width: 100%;\">" +
            "Phone-number:" +
            "<br>" +
            "<input type=\"tel\" name=\"phonenumber\" pattern=\"[0-9]{10}\" placeholder=\"i.e. 0123456789\" required>" +
            "</td>" +
            "</tr>" +
            "<tr>" +
            "<td colspan=\"1\" style=\"width: 100%;\">" +
            "Pet ID:" +
            "<br>" +
            "<input type=\"text\" name=\"petid\" value=\"" + petToClone['id'] + "\" readonly>" +
            "</td>" +
            "</tr>" +
            "<tr>" +
            "<td colspan=\"1\" style=\"width: 100%; text-align: center;\">" +
            "<input type=\"submit\" name=\"submit\" value=\"Adopt now!\">" +
            "</td>" +
            "</tr>" + "</table>" +
            "</form>" +


            "</div>" +
            "</div>" +
            "</div>" +
            "</div>";
    }

    function getAllPet() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                petList = JSON.parse(this.response);
                petContainer.innerHTML = "";
                for (var x in petList) {
                    petContainer.innerHTML += clonePetItem(petList[x]);
                    // console.log(clonePetItem(petList[x]));
                }

            }
        };
        xhttp.open("GET", "http://localhost:3000/pets/all", true);
        xhttp.send();
    }

    function searchPet() {
        var key = document.getElementById("petToSearch").value;
        console.log("seraching");
        if (key == "") {
            console.log("Empty");
            getAllPet();
        }
        else {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    petList = JSON.parse(this.response);
                    petContainer.innerHTML = "";
                    for (var x in petList) {
                        petContainer.innerHTML += clonePetItem(petList[x]);
                        // console.log(clonePetItem(petList[x]));
                    }

                }
            };
            xhttp.open("GET", "http://localhost:3000/pets/get?petDescription=" + key, true);
            xhttp.send();
        }
    }

    getAllPet();
</script>

<!-- -------------------handle interactive with item------------------- -->
<script>
    var currentid;

    function showDetailed(id) {
        console.log(id);
        var container = document.getElementById(id);



        container.style.transition = "all .3s";

        if (window.innerWidth > 1000) {
            container.style.flex = "0 0 98%";
            container.style.margin = "0";
            container.querySelector(".pet-overview").style.flex = "0 0 48%";
            container.querySelector(".pet-overview").style.padding = "60 20 20 40";
            container.querySelector(".pet-description").style.display = "block";
            container.querySelector(".adoption-form").style.display = "block";
        }
        else {
            container.style.flex = "0 0 98%";
            container.style.margin = "0";
            container.querySelector(".pet-overview").style.flex = "0 0 98%";
            container.querySelector(".pet-overview").style.padding = "60 20 20 40";
            container.querySelector(".pet-description").style.display = "block";
            container.querySelector(".adoption-form").style.display = "block";
        }



        if (currentid != null && currentid != id)
            minimize(currentid);
        currentid = id;
        console.log(currentid);

    }

    function minimize(id) {
        console.log("minimize" + id);

        var container = document.getElementById(id);

        if (window.innerWidth > 1000) {
            container.style.flex = "0 0 48%";
            container.style.margin = "10 10 10 10";
            container.querySelector(".pet-overview").style.flex = "0 0 100%";
            container.querySelector(".pet-overview").style.padding = "20 20 20 20";
            container.querySelector(".pet-description").style.display = "none";
            container.querySelector(".adoption-form").style.display = "none";
        } else {
            container.style.flex = "0 0 98%";
            container.style.margin = "10 10 10 10";
            container.querySelector(".pet-overview").style.flex = "0 0 100%";
            container.querySelector(".pet-overview").style.padding = "20 20 20 20";
            container.querySelector(".pet-description").style.display = "none";
            container.querySelector(".adoption-form").style.display = "none";
        }
    }
</script>

<script>
    function onSubmit() {
        window.scrollTo({ top: 0, style: "smooth" });
        alert("Your form has been submitted successfully!");
        getAllPet();
    }
</script>



</html>